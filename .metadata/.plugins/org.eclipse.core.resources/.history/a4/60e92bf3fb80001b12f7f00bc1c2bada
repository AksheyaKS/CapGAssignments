package com.cg.jpal.ui;

import java.util.Scanner;

import javax.persistence.EntityManager;
import javax.persistence.EntityTransaction;

import com.cg.jpal.entity.Author2;
import com.cg.jpal.entity.Book;
import com.cg.jpal.util.JpaUtil;

public class AuthorFunctions2 {

	public static void main(String[] args) {
		
		Long authorId;
		EntityManager em = JpaUtil.getEntityManager();
		Scanner s = new Scanner(System.in);
		int choice;
		
		do {
			
			System.out.println("Choose one of the following operations to perform:\n");
			System.out.println("1. Insert rows into author table");
			System.out.println("2. Insert rows into books table");
			System.out.println("3. View all books");
			System.out.println("4. View all books specific to author");
			System.out.println("5. View books priced b/w 500 to 1000");
			System.out.println("6. View author of particular book");
			System.out.println("7. Exit\n");
			
			choice = s.nextInt();
			
			loop:
				if(choice < 0 || choice > 7) {
					
					System.out.println("Please enter a valid choice");
					break loop;
				}
			
			switch(choice) {
			
				case 1:
					
					EntityTransaction insert = em.getTransaction();
					System.out.println("Enter the number of authors you want to enter: ");
					int count = s.nextInt();
					
					for(int i = 0; i < count; i++) {
						
						System.out.println("Enter the author Id: ");
						authorId = s.nextLong();
						System.out.println("Enter the author's name: ");
						String name = s.next();
						System.out.println("Enter book isbn: ");
						Long isbn = s.nextLong();
						System.out.println("Enter book title: ");
						String title = s.next();
						System.out.println("Enter book price: ");
						Double price = s.nextDouble();
						
						Book b = new Book(isbn, title, price);
						Author2 a = new Author2(authorId, name,b);
						
						insert.begin();
						em.persist(a);
						insert.commit();
						
					}
					
					break;
				
			
			}

		}while(choice != 7);
		
		System.out.println("Successfully exited!");

	}
}
